<ipvs>
	<tagMappings>
		<xml>tagMappings.xml</xml>
	</tagMappings>
	<!-- variables are always saved to folder -->
    <global_system_variables path="/data/dbmigration/workarea/global_system_variables.xml">
	    <variable name="serviceVersion" description="current migration service version"/>
	    <variable name="DBMigrationFolder" description="migration folder e.g. /etc/migration/1.0/database"/>
	    <variable name="DBMigrationWorkareaFolder" description="work folder e.g. /data/dbmigration/workarea/1.0/migration"/>
	    <variable name="DBMigrationWorkareaTempFolder" description="work temp folder e.g. /data/dbmigration/workarea/1.0/migration/temp"/>
	    <variable name="DBMigrationWorkareaBackupFolder" description="work backup folder e.g. /data/dbmigration/workarea/1.0/pre_migration_bck_db"/>
	    <variable name="servicedomain" description="servicedomain - e.g. default"/>
	    <variable name="ipvs_collection" description="for current servicedomain - collection name e.g. IPVSc_default"/>
	    <variable name="ipvs_colindex" description="for current servicedomain - col index name e.g. IPVSis_colnids_default"/>
	    <variable name="ipvs_nodeindex" description="for current servicedomain - node index name e.g. IPVSi_nids_default"/>
	    <variable name="serviceVersion_db" description="current database service version"/>
	    <variable name="serviceVersion_software" description="current software service version"/>
	    <variable name="aftermigration_serviceVersion" description="after migration service version">2.34.8</variable> 
	</global_system_variables>      

	<DBMigrationTaskSequence>
		<vendor>sedna</vendor>
		<priorityLevels>10</priorityLevels>
		<numberOfLoops>1</numberOfLoops>
		<initialDelay>0</initialDelay>
		<delay>1</delay>
		<delayUnit>SECONDS</delayUnit>
		<corePoolSize>1</corePoolSize>
		<maximumPoolSize>1</maximumPoolSize>
		<keepAliveTime>60</keepAliveTime>
		<loopEndlessly>false</loopEndlessly>
		
		<DBMigrationTasks enable="true" name="tasks_createsnapshot" priority="1" completBeforeStartNext="true">
			<DBMigrationTask enable="true" name="task_xsls_transform_task"
				priority="2" saveForDiff="true">
				<ipvstag_ApplyXslFileSystem enable="true">
				
					
					<!-- root -->
					<xslMapping enable="true" type="non_objectType" non_objectType="service.version">
						<xsl_transform xsl="../../shared/xsl/_updateServiceVersionXml.xsl" />
					</xslMapping>
								
					<!-- default apply to all xmls-->					
					<xslMapping enable="false" type="objectType" objectType="*">
						<xsl_transform xsl="../../shared/xsl/_updateServiceVersion.xsl" />
					</xslMapping>
					
					<!-- apply_serviceVersion - only called on last service version migration -->	
					<!-- apply_serviceVersion - only called on on object types which are not mapped -->	
					<xslMapping enable="true" type="apply_serviceVersion" apply_serviceVersion="*">
						<xsl_transform xsl="../../shared/xsl/_updateServiceVersion.xsl" />
					</xslMapping>	
					
					
					<!-- device types -->
					<xslMapping enable="true"  type="objectType" objectType="DMS-100-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="DMS-1000-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="DMS-120-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="DMS-1200-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="DMS-1500-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="DMS-200-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="IPVSClient-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MPEGTS-Rx-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MPEGTS-Tx-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="DMS-25-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MS-25-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MS-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="RTP-Rx-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType"  objectType="RTP-Tx-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="UDP-Rx-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="UDP-Tx-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="V2D-Rx-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="V2D-Tx-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="V2D-XP200-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="V2D-XP200S-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="V2D-XP220-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="V2D-XP220S-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="V2D-XP100-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					
					<xslMapping enable="true"  type="objectType" objectType="ORB-500-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="DMS-1600-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="DMS-1700-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="BaseOS-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="EMS-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MNA-110-ENCDP-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MNA-110-ENCDVI-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MNA-110-ENCHDSDI-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MNA-120-DECDVIAudio-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MNA-120-ENCANAAudio-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MNA-120-ENCDPAudio-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MNA-120-ENCDVIAudio-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MNA-120-ENCHDSDIAudio-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="NRC-200-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="OWS-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="DMS-1550-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="WiPG-2000-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="V2D-XPi-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="SG-100-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="MS-150-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					<xslMapping enable="true"  type="objectType" objectType="NGS-D220-Device">
						<xsl_transform xsl="../xsl/Device.xsl" />
					</xslMapping>
					
					<!--  individual objects  -->
					
					<!-- 
					<xslMapping enable="true"  type="objectType" objectType="AssetAdminPolicyRule">
						<xsl_transform xsl="xsl/AssetAdminPolicyRule.xsl" />
					</xslMapping>
					-->
					
					<!-- Adding new node from existing db object -->
					<!-- 
					<xslMapping enable="true"  type="objectType" objectType="AssetAdminPolicyRule">
 					    <xsl_transform xsl="xsl/add_AssetAdminPolicyRule.xsl"  resultType="newdoc"  newDocDir="ipvs.default.assetadminpolicyrulelist"
 					 	xpath="/AssetAdminPolicyRule[AssetAdminRoleSet/AssetAdminObjectRole[RoleObject='MediaStreamPortResource' and RoleAction='View']]"/>
					</xslMapping>
					-->
					
				</ipvstag_ApplyXslFileSystem>
			</DBMigrationTask>
		</DBMigrationTasks>
		
		<!-- 
				while using xquery to update or delete any node in database follow these three steps
				1. first import the back update database to db 
				2. run the xsl
				3. then export the db xmls to xsl apply area 
				Note: Maintain the priority as it is and apply xsl  priority has to 4
	 
		
				<DBMigrationTasks enable="true" name="tasks_importxmlsintodb" priority="1" completBeforeStartNext="true">
					<DBMigrationTask enable="true" name="tasks_importxmlsintodb" priority="1">
						<ipvstag_ImportXmlsIntoDB useXSLApplyFolder='true'/>
					</DBMigrationTask>
				</DBMigrationTasks>
				
				<DBMigrationTasks enable="true" name="task_Xquery" priority="2" completBeforeStartNext="true">
					<DBMigrationTask enable="true" name="task_Xquery" priority="2">
						<ipvstag_XQuery file="xquery/update_assetresource.xquery"/>
					</DBMigrationTask>
				</DBMigrationTasks>
				
				<DBMigrationTasks enable="true" name="tasks_exportxmlsfromdb" priority="3" completBeforeStartNext="true">
					<DBMigrationTask enable="true" name="tasks_exportxmlsfromdb" priority="3">
						 <ipvstag_ExportXmlsFromDB  useXSLApplyFolder='true'/>	
					</DBMigrationTask>
				</DBMigrationTasks>
		 
		 -->
 		 

	</DBMigrationTaskSequence>
</ipvs>