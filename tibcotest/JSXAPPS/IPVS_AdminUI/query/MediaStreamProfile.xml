<query>
   <![CDATA["

let $startFrom := _STARTFROM_ 
let $countToFetch := _COUNTTOFETCH_  

let $list2 := for $b in #OBJ_MediaStreamProfile_OBJ# 
where $b_WHEREXPATH_    
order by _SORTXPATH_  _SORTORDER_   
return $b  
let $list3 := subsequence($list2, $startFrom, $countToFetch) 
let $list := for $b in  $list3 
return 
<record  
jsxid='{ data($b/@NID) }'  
jsxtext='{ data($b//Title) }'  
jsxProfileStreamType='{ data($b//StreamType\)  }'
jsxindex='{ data($b//Priority\) }'  
jsxProfileDescription='{ data($b//Description\) }'  
> 
{
for $tag in distinct-values($b//Tag/@Name)
return 
attribute {  concat('jsxTagValue', replace($tag,' ','' ) ,'')  }  {  data($b/Groups/Tag[@Name=$tag]/@Value)  }   
}
</record> 
let $records := <data jsxid='jsxroot'>{$list}</data>
let $result :=  insert-before($records,1, 
<GetListObjectResponseData> 
<ObjectCount> { count($list2)} </ObjectCount> 
<ObjectLastWhereEndCount>{$startFrom}</ObjectLastWhereEndCount> 
<CountToFetch>{$countToFetch}</CountToFetch> 
</GetListObjectResponseData>  )
 return <result>{$result}</result>"]]>
</query>