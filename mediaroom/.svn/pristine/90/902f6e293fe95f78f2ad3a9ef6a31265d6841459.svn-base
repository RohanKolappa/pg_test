declare function local:getResourceInfo( $b as element()*, $detail as xs:string)
as element ()*
{
   let $resourceInfo := if ($detail = 'EXTENDED')
		then 
		   	<Resource ownerUserJID='{ data($b//OwnerUserJID) }'		   		 
	        	      title = '{ data($b//Title) }'
		   	      presence = '{ data($b//Presence) }'		   		 		 
		   	      state = '{ data($b//StateFlag) }'		   		 		 		   	      
		   	      type = '{ data($b//Type) }'
		   	      description = '{ data($b//Description) }'				      
		 	 >     				 		  		 		  		  								
			 {$b//Groups}
			</Resource> 
   		else  	<Resource ownerUserJID='{ data($b//OwnerUserJID) }'		   		 
	        	      title = '{ data($b//Title) }'
		   	      presence = '{ data($b//Presence) }'		   		 		 
		   	      state = '{ data($b//StateFlag) }'		   		 		 		   	      
		   	      type = '{ data($b//Type) }'
		   	      description = '{ data($b//Description) }'	
		 	 />     	
	return $resourceInfo
};


declare function local:getList()
as element()*
{
	let $list1 := 
		for $b in #OBJ_AssetResource_OBJ#		
			where $b _XPATHAND_
			return $b
	return $list1
};

declare function local:formatItem($b as element()*, $detail as xs:string) {
	let $item := local:getResourceInfo($b, $detail)
	return $item
};

declare function local:formatList($b as element()*, $detail as xs:string) {
	let $list:= $b
	return $b
};