<?xml version="1.0" encoding="UTF-8"?>
<!--
	This file stores bootstrap properties needed by IpvsComponent.
	Property names must be in the format: "prop.name.is.blah=value" That
	will be stored as: <prop> <name> <is> <blah>value</blah> </is> </name>
	</prop> Most properties are stored in the Openfire database. A
	property viewer and editor is included in the admin console.
-->
<config>
	<!-- +++++++ GENERAL SETTINGS ++++++++++++++ -->
	<locale>en</locale>
	<setup>true</setup>
	<ShutdownThread>
		<sleepSecsBeforeShutdown>5</sleepSecsBeforeShutdown>
	</ShutdownThread>	
	<library>
		<lib>/home/pravin/work/automation/appletfiles</lib>
	</library>
	<version>
		<major>1</major>
		<minor>1</minor>
		<micro>1</micro>
		<status>Alpha</status>
		<statusVersion>1</statusVersion>
	</version>
	<logs>
		<enable>
			<logToFile>true</logToFile>
			<packetsummary>false</packetsummary>
			<dbsummary>true</dbsummary>
			
			<notificationsummary>false</notificationsummary>
			<packetdetails>false</packetdetails>
			<ipvsxmlpackets>false</ipvsxmlpackets>

			<dbquery>false</dbquery>
			<dbqueryresults>false</dbqueryresults>
			<connectionpool>false</connectionpool>

			<jetty>false</jetty>
			<subscription>false</subscription>
			<dbcache>false</dbcache>
			<presence>false</presence>
			<connectionhandler>false</connectionhandler>
		</enable>
	</logs>
	
	<shared>
		<factorydb>/home/pravin/test//factorydb</factorydb>
		<dbMigrationBackupArea>/data/dbmigration/backup</dbMigrationBackupArea>		
		<dbVendor>sedna</dbVendor>		
	</shared>
	
	<xmpp>
		<socket>
			<ssl>
				<algorithm>TLS</algorithm>
				<storeType>jks</storeType>
				<keystore>resources/security/keystore
				</keystore>
				<keypass>changeit</keypass>
				<cilent>
					<truststore>resources/security/client.truststore
					</truststore>
				</cilent>
				<truststore>resources/security/truststore
				</truststore>
				<trustpass>changeit</trustpass>
				<algorithm>TLS</algorithm>
			</ssl>
		</socket>
	</xmpp>
	
	<domainSchema>
	    <const name='DB_COL_PREFIX'>IPVSc_</const>
	    <const name='DB_DOC_PREFIX'>IPVSd_</const>
	    <const name='DB_INDEX_NODE_PREFIX'>IPVSi_nids_</const>
	    <const name='COL_INDEX_NODE_PREFIX'>IPVSis_colnids_</const>	
	    <const name='DB_SUB_DOC_PREFIX'>IPVScs_</const>
	    <const name='DB_SUB_COL_PREFIX'>IPVSds_</const>
	    <const name='DB_DATA'>1</const>
	    <const name='DB_SCHEMA'>2</const>
		<collection name="data" typeConst="DB_DATA" prefixConst='DB_COL_PREFIX'/>
		<collection name="schema" typeConst="DB_SCHEMA" prefixConst='DB_SUB_COL_PREFIX'/>
		<index name="nodeIndex" typeConst="DB_DATA" prefixConst='DB_INDEX_NODE_PREFIX' xPath='//@NID'/>
		<index name="nodeColIndex" typeConst="DB_DATA" prefixConst='COL_INDEX_NODE_PREFIX' xPath='//@parentNID'/>
		<document name="sub" typeConst="DB_SCHEMA"  prefixConst='DB_SUB_DOC_PREFIX'/>
 	</domainSchema>
	
	<IpvsDBDriver>
		<default>com.ipvsserv.nxd.api.sednanative.SednaNativeDriverImpl</default>
		<sednaNative>com.ipvsserv.nxd.api.sednanative.SednaNativeDriverImpl</sednaNative>
		<xmldbExist>com.ipvsserv.nxd.api.xmldb.exist.ExistXmlDBDriverImpl</xmldbExist>
		<xmldbSedna>com.ipvsserv.nxd.api.xmldb.sedna.SednaXmlDBDriverImpl</xmldbSedna>
		<xmldb>com.ipvsserv.nxd.api.xmldb.XmlDBDriverImpl</xmldb>
	</IpvsDBDriver>
	
	
	<!-- +++++++ MODULES SETTINGS ++++++++++++++ -->
	<modules>
		<priorityLevels>10</priorityLevels>
		<module name="SednaXmlDBAPI" enable="true" priority="2">
			<class>com.ipvsserv.nxd.api.xmldb.sedna.SednaXmlDBModule</class>
			<param name='host'>10.1.5.165</param>
			<param name='database'>msdb</param>
			<param name='user'>SYSTEM</param>
			<param name='pwd'>MANAGER</param>
			<param name='vendor'>sedna</param>
			<param name='databaseurl'>xmldb:sedna://10.1.5.165/msdb</param>		
			<param name='corePoolSize'>1</param>
			<param name='maxPoolSize'>1</param>	
		</module>
		<module name="ExternalDBMigration" enable="true" priority="4">
			<class>com.ipvsserv.nxd.migration.ExternalDBMigrationModule</class>
		</module>	
	</modules>

	<ExternalDBMigration>
		<DBMigration_xml>/home/pravin/test/dbmigration/migration/mytest/database/DBMigration.xml</DBMigration_xml>
		<dbMigrationWorkArea>/home/pravin/test/dbmigration/workarea</dbMigrationWorkArea>
		<serviceVer>1.5</serviceVer>
		<!-- not needed -->
		<dbMigrationfolder>/home/pravin/test/dbmigration/migration</dbMigrationfolder>
		<empty_dbServiceVersion>1.0</empty_dbServiceVersion>
		<serviceVersionHistory>serviceVersion.history</serviceVersionHistory>
		<dbVendor>sedna</dbVendor>
		<preMigrationDBBackupFolder>pre_migration_bck_db</preMigrationDBBackupFolder>
	</ExternalDBMigration>	
 
	<SednaXmlDBAPI>
		<connectionProperties/>
		<databaseProperties>
			<param name='conn-max-active'>1</param>
			<param name='conn-max-idle'>-1</param>
			<param name='conn-max-wait'>29000</param>
			<param name='conn-remove-abandoned-timeout'>29000</param>
			<param name='conn-remove-abandoned'>false</param>
			<param name='conn-log-abandoned'>1</param>
			<param name='conn-abandoned-check-interval'>29000</param>
		</databaseProperties>	
	</SednaXmlDBAPI>
 
</config>